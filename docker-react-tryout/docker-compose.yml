version: "3.8"

services:
  restaurant_cms:
    #   # container_name: restaurant_cms
    #   build:
    #     context: ./restaurant_cms
    #   volumes:
    #     - ./restaurant_cms:/my-app
    #   command: /my-app/entry.sh
    image: logickee/restaurant-cms-tryout
    ports:
      - 3004:3000
    restart: unless-stopped

  admin_cms:
    # container_name: admin_cms
    # build:
    #   context: ./admin_cms
    # volumes:
    #   - ./admin_cms:/my-app
    image: logickee/admin-cms-tryout
    ports:
      - 3005:3000
    restart: unless-stopped

  nextjs_helloworld:
    # container_name: admin_cms
    # build:
    #   context: ./admin_cms
    # volumes:
    #   - ./admin_cms:/my-app
    image: logickee/nextjs-helloworld-tryout
    ports:
      - 3007:3000
    restart: unless-stopped

  gatsby_helloworld:
    # container_name: admin_cms
    # build:
    #   context: ./admin_cms
    # volumes:
    #   - ./admin_cms:/my-app
    image: logickee/gatsby-helloworld-tryout
    ports:
      - 3008:3000
    restart: unless-stopped

  wiki:
    # build:
    #   context: ./wiki
    image: logickee/wiki-app-tryout
    ports:
      - 3006:3000
    restart: unless-stopped

  whoami:
    image: "traefik/whoami"
    container_name: "whoami_root"
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.whoami_root.rule=Host(`whoami_react_test.iamon99.com`)"
      - "traefik.http.routers.whoami_root.entrypoints=websecure"
      - "traefik.http.routers.whoami_root.tls.certresolver=myresolver"

networks:
  default:
    external:
      name: traefik-proxy-network
